# FD-Java-RaspberryPi : Chapter 5 : Raspberry Pi pinning

## Pin types


### Power and ground
Both 5V and 3.3V are available as power pins and, of course, also ground pins.

### Digital GPIO (General-Purpose Input/Output)
They use 3.3V, meaning an output pin will be set to 0V (low) or 3.3V (high) and an input pin will read 0V as low and 3.3V as high.

Most of the GPIOs have an internal pull-up or pull-down resistor which can be enabled in software.

## Pin functions

<table>
  <tr>
    <th>Name</th>
    <th>Label</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>UART</td>
    <td>Universal Asynchronous Receiver and Transmitter</td>
    <td>Asynchronous serial communication protocol</td>
  </tr>
  <tr>
    <td>GPCLK</td>
    <td>General Purpose Clock</td>
    <td>Output a fixed frequency</td>
  </tr>
  <tr>
    <td>I2C</td>
    <td>Inter Integrated Circuit</td>
    <td>Sychronous serial computer bus</td>
  </tr>
  <tr>
    <td>SPI</td>
    <td>Serial Peripheral Interface</td>
    <td>Four-wire serial bus</td>
  </tr>
  <tr>
    <td>PWM</td>
    <td>Pulse-Width Modulation</td>
    <td>Generate analog ouptut with a ditital one</td>
  </tr>
</table>

### Universal Asynchronous Receiver and Transmitter (UART - Serial)
Universal Asynchronous Receiver and Transmitter (UART - Serial)

For two-way communication, two wires are needed between RX and TX from both sides:

The communication between these two devices can happen in different ways:
 * simplex: one direction only without a message back to confirm the receiving
 * half-duplex: devices can only send or receive at once
 * full-duplex: both devices can send and receive at the same time

full-duplex: both devices can send and receive at the same time

but you can use lower (1200, 2400, 4800) or higher (19200, 38400, 57600, 115200) speeds,  depending
on the speed which can be handled reliably by the device.

### General Purpose Clock (GPCLK)
General Purpose Clock pins can be configured to continuously output a fixed frequency. So once your software has started this output, no further control is needed. The clock signal as very stable as it is generated by hardware components.

### Inter Integrated Circuit (I²C)
I²C, invented by Philips (1982), is a serial computer bus to transfer data with these features:
 * synchronous: exchange of data based on a clock signal
 * multi-master and multi-slave: multiple controllers can be used together with multiple devices
 * packet-switched: data is grouped in packets with a header and payload
 * single-ended: varying voltage represents the data compared to a reference voltage (the ground)

It can be used to transfer (low-speed) data between boards over a short distance.

### Serial Peripheral Interface (SPI)

Just like I²C, SPI uses separate cables for the data and the clock to make sure the data is read at exactly the right time. Where I²C needs two cables, SPI needs four but is faster while using less power.

SPI was invented by Motorola in the mid-1980s. Data is transferred in full-duplex mode, using a single master and one or more slaves.

In most hardware diagrams and on SPI-components you’ll find these names:
 * MOSI = Master Out Slave In = Communication from Pi to component
 * MISO = Master In Slave Out = Communication from component to Pi

### Pulse-Width Modulation (PWM)
As a digital GPIO can only be low (0V) or high (3.3V) it is not possible to have a real analog output, for example, if you want to fade an LED to half brightness.

In these cases, PWM is the perfect solution! By switching fast enough between low and high and using different durations for the low and/or high state, a “semi-analog output” can be achieved by creating an averaged value. The values to be used in this case are:

 * On-time: duration the output is high
 * Off-time: duration the output is low
 * Period: on-time + off-time
 * Duty cycle: percentage of the time the output is high

## Different pinning numbering schemes

### BCM number
BCM refers to the “Broadcom SOC channel” number, which is the numbering inside the chip which is used on the Raspberry Pi.

These numbers changed between board versions as you can see in the previous tables for the 26-pin header type 1 versus 2, and or not sequential.

### WiringPi number

WiringPi⁵⁵ is developed by Gordon Henderson⁵⁶ and installed by default on the Pi when you use Raspbian. You can easily check the version and pins with the commands “gpio -v” and “gpio readall”.

```shell
$ gpio -v

$ gpio readall
```

Important, if you are using a Raspberry Pi 4, you will need to make sure you are on the latest version 2.52. Because the internal wiring of the processor of this type is different compared to the previous boards, an updated gpio is available. Check the version with “gpio -v” in the terminal and install the new version with the following commands:

```shell

$ cd /tmp
$ wget  https://project-downloads.drogon.net/wiringpi-latest.deb
$ sudo dpkg -i wiringpi-latest.deb

$ gpio -v
gpio version: 2.50

gpio readall
 +-----+-----+---------+------+---+---Pi 4B--+---+------+---------+-----+-----+
 | BCM | wPi |   Name  | Mode | V | Physical | V | Mode | Name    | wPi | BCM |
 +-----+-----+---------+------+---+----++----+---+------+---------+-----+-----+
 |     |     |    3.3v |      |   |  1 || 2  |   |      | 5v      |     |     |
 |   2 |   8 |   SDA.1 |   IN | 1 |  3 || 4  |   |      | 5v      |     |     |
 |   3 |   9 |   SCL.1 |   IN | 1 |  5 || 6  |   |      | 0v      |     |     |
 |   4 |   7 | GPIO. 7 |   IN | 1 |  7 || 8  | 1 | IN   | TxD     | 15  | 14  |
 |     |     |      0v |      |   |  9 || 10 | 1 | IN   | RxD     | 16  | 15  |
 |  17 |   0 | GPIO. 0 |   IN | 0 | 11 || 12 | 0 | IN   | GPIO. 1 | 1   | 18  |
 |  27 |   2 | GPIO. 2 |   IN | 0 | 13 || 14 |   |      | 0v      |     |     |
 |  22 |   3 | GPIO. 3 |   IN | 0 | 15 || 16 | 0 | IN   | GPIO. 4 | 4   | 23  |
 |     |     |    3.3v |      |   | 17 || 18 | 0 | IN   | GPIO. 5 | 5   | 24  |
 |  10 |  12 |    MOSI |   IN | 0 | 19 || 20 |   |      | 0v      |     |     |
 |   9 |  13 |    MISO |   IN | 0 | 21 || 22 | 0 | IN   | GPIO. 6 | 6   | 25  |
 |  11 |  14 |    SCLK |   IN | 0 | 23 || 24 | 1 | IN   | CE0     | 10  | 8   |
 |     |     |      0v |      |   | 25 || 26 | 1 | IN   | CE1     | 11  | 7   |
 |   0 |  30 |   SDA.0 |   IN | 1 | 27 || 28 | 1 | IN   | SCL.0   | 31  | 1   |
 |   5 |  21 | GPIO.21 |   IN | 1 | 29 || 30 |   |      | 0v      |     |     |
 |   6 |  22 | GPIO.22 |   IN | 1 | 31 || 32 | 0 | IN   | GPIO.26 | 26  | 12  |
 |  13 |  23 | GPIO.23 |   IN | 0 | 33 || 34 |   |      | 0v      |     |     |
 |  19 |  24 | GPIO.24 |   IN | 0 | 35 || 36 | 0 | IN   | GPIO.27 | 27  | 16  |
 |  26 |  25 | GPIO.25 |   IN | 0 | 37 || 38 | 0 | IN   | GPIO.28 | 28  | 20  |
 |     |     |      0v |      |   | 39 || 40 | 0 | IN   | GPIO.29 | 29  | 21  |
 +-----+-----+---------+------+---+----++----+---+------+---------+-----+-----+
 | BCM | wPi |   Name  | Mode | V | Physical | V | Mode | Name    | wPi | BCM |
 +-----+-----+---------+------+---+---Pi 4B--+---+------+---------+-----+-----+
```

---